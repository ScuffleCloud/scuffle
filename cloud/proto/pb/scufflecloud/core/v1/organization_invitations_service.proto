syntax = "proto3";

package scufflecloud.core.v1;

import "tinc/annotations.proto";

import "scufflecloud/core/v1/users.proto";
import "scufflecloud/core/v1/organizations.proto";
import "scufflecloud/core/v1/constraints.proto";

service OrganizationInvitationsService {
    rpc CreateOrganizationInvitation(CreateOrganizationInvitationRequest) returns (OrganizationInvitation) {
        option (tinc.method).endpoint = {
            post: "/organization-invitations"
        };
    }

    rpc ListOrganizationInvitationsByOrganization(OrganizationByIdRequest) returns (OrganizationInvitationList) {
        option (tinc.method).endpoint = {
            get: "/organizations/{id}/invitations"
        };
    }
    rpc ListOrgnizationInvitesByUser(UserByIdRequest) returns (OrganizationInvitationList) {
        option (tinc.method).endpoint = {
            get: "/users/{id}/invitations"
        };
    }

    rpc GetOrganizationInvitation(OrganizationInvitationByIdRequest) returns (OrganizationInvitation) {
        option (tinc.method).endpoint = {
            get: "/organization-invitations/{id}"
        };
    }
    rpc AcceptOrganizationInvitation(OrganizationInvitationByIdRequest) returns (OrganizationInvitation) {
        option (tinc.method).endpoint = {
            post: "/organization-invitations/{id}/accept"
        };
    }
    rpc DeclineOrganizationInvitation(OrganizationInvitationByIdRequest) returns (OrganizationInvitation) {
        option (tinc.method).endpoint = {
            post: "/organization-invitations/{id}/decline"
        };
    }
}

message CreateOrganizationInvitationRequest {
    string email = 1 [(tinc.field).constraint.string.email = true];
}

message OrganizationInvitationList {
    repeated OrganizationInvitation invitation = 1;
}

message OrganizationInvitationByIdRequest {
    string id = 1 [(string_constraint).id = true];
}
