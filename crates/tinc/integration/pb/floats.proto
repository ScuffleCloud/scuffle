syntax = "proto3";

package floats;

import "tinc/annotations.proto";

import "google/protobuf/wrappers.proto";

message FloatMessage {
    option (tinc.message).generate = true;

    float simple_f32 = 1;
    double simple_f64 = 2;

    repeated float rep_f32 = 3;
    repeated double rep_f64 = 4;

    optional float opt_f32 = 5;
    optional double opt_f64 = 6;

    optional google.protobuf.FloatValue google_f32 = 7;
    optional google.protobuf.DoubleValue google_f64 = 8;

    map<string, float> map_f32 = 9;
    map<string, double> map_f64 = 10;

    oneof variant {
        float oneof_f32 = 11;
        double oneof_f64 = 12;
    }
}

service FloatService {
    rpc Float(FloatRequest) returns (FloatResponse) {
        option (tinc.method).endpoint = {
            post: "/float"
        };
    }
}

message FloatRequest {
    option (tinc.message).generate = true;

    float arg_f32 = 1 [(tinc.field).constraint.float = {
        disallow_nan: true
    }];;

    double arg_f64 = 2 [(tinc.field).constraint.double = {
        disallow_nan_and_infinity: true
        gt: 0.0
    }];;
}

message FloatResponse {
    string param = 1;
}
